@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

:root{
  --slot-gap: 12px;
  --time-col: 50px;
  --grid-gap: 14px;
  --grid-max: 1200px;
}

/* Basis */
body{ margin:0; font-family:'Inter',sans-serif; background:#f8f9fc; color:#333; }
header{ background:linear-gradient(90deg,#3b3b98,#575fcf); color:#fff; padding:1rem; font-size:1.3rem; font-weight:600; box-shadow:0 2px 6px rgba(0,0,0,.1); }
main{ padding:1rem; overflow-x:auto; }

/* ========== TIMETABLE: EIN GEMEINSAMES GRID ========== */
.timetable{
  display: grid;
  grid-template-columns: var(--time-col) repeat(5, 1fr); /* Zeitspalte + 5 Tage */
  grid-template-rows: auto 1fr; /* erste Reihe: Tage, zweite: times+subjects */
  gap: var(--grid-gap);
  max-width: var(--grid-max);
  margin: 0 auto;
  box-sizing: border-box;
}

/* Tage (erste Reihe) - BELEGUNG: gesamte Breite, intern gleiche Spalten */
.days{
  grid-column: 1 / -1; /* ganz oben, über alle Spalten */
  display: grid;
  grid-template-columns: var(--time-col) repeat(5, 1fr); /* exakt dieselbe Spaltenaufteilung */
  gap: var(--grid-gap);
  align-items: center;
}

/* Platzhalter (erste Zelle) unsichtbar halten */
.days .placeholder{
  visibility: hidden;
  height: 0;
  padding: 0;
  margin: 0;
}

/* Styling der Day-Boxen */
.days .day{
  font-weight:600;
  text-align:center;
  padding:8px 6px;
  background:#eef1fb;
  border-radius:10px;
  box-shadow:0 1px 3px rgba(0,0,0,.05);
  display:flex;
  align-items:center;
  justify-content:center;
  box-sizing:border-box;
}

/* Zeitspalte - links, zweite Reihe */
.times{
  grid-column: 1 / 2;
  grid-row: 2 / 3;
  position: relative;
  padding-left: 8px;
}
.time{
  border-top: none !important; 
  font-size:12px;
  color:#333;
  position:absolute; /* JS positioniert mittels top/height */
  width:100%;
}

/* JSON-Zeiten unsichtbar */
.special-line {
  display: none !important;
}
/* Subjects - rechte Fläche, zweite Reihe; intern 5 Spalten */
.subjects{
  grid-column: 2 / -1; /* von Spalte 2 bis Ende (die 5 Tage) */
  grid-row: 2 / 3;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: var(--grid-gap);
  align-items: start;
}

/* jedes day-column bleibt eine Zelle im subjects-Grid */
.day-column{
  position: relative;
  min-width: 0;
}

/* Boxen absolut innerhalb der Spalte, aber MITTLIG ausgerichtet */
.day-column .subject{
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 12px); /* minimaler Innenabstand */
  box-sizing: border-box;
}

/* Box-Look */
.subject{
  background:#fff;
  border-radius:12px;
  padding:10px;
  box-shadow:0 6px 18px rgba(12,24,40,0.06);
  font-size:13px;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  overflow:hidden;
  transition: transform .12s ease, box-shadow .12s ease;
}
.subject:hover{ transform: translateY(-4px); box-shadow:0 12px 36px rgba(12,24,40,0.10); }
.subject-title{ font-weight:700; margin-bottom:6px; }
.subject-time{ font-size:12px; color:#666; margin-bottom:6px; }
.subject-room, .subject-teacher{ font-size:12px; color:#555; }

/* Mobile tabs (wie vorher) */
.day-tabs{ display:none; justify-content:space-around; background:#fff; padding:8px; border-bottom:1px solid #ddd; }
.day-tabs button{ background:#f0f0f5; border:none; padding:6px 12px; border-radius:8px; font-size:14px; cursor:pointer; }
.day-tabs button.active{ background:#4a4de7; color:#fff; }


.subject {
  cursor: pointer;
  /* Füge height zur Transition hinzu für einen sanften Übergang */
  transition: transform .2s ease, box-shadow .2s ease, height .2s ease, padding .2s ease, z-index 0s; 
}

/* Zustand der VERGRÖSSERUNG bei Klick für Lesbarkeit */
.subject.enlarged {
  /* Z-Index: Bringt das Element über alle anderen Fächer, damit es sichtbar ist */
  z-index: 100; 
  
  /* Höhe: Setzt die Höhe auf einen Wert, der garantiert, dass der Inhalt passt */
  /* Da die Box 4 Zeilen enthält, sind 100px vertikale Höhe gut geeignet. */
  height: 100px !important; 
  
  /* Reset: Wir wollen keine Skalierung, nur Zentrierung beibehalten */
  transform: translateX(-50%); 
  
  /* WICHTIG: Erlaubt, dass der Text über die ursprüngliche, kleine Box hinausragt */
  overflow: visible; 
  
  /* Schatten und Padding für besseren Hervorhebungs-Effekt */
  box-shadow: 0 10px 30px rgba(12, 24, 40, 0.4);
  padding: 15px 10px; 
}

/* Optional: Inhalt beim Vergrössern etwas grösser darstellen */
.subject.enlarged .subject-title { font-size: 1.2rem; }
.subject.enlarged .subject-room, 
.subject.enlarged .subject-teacher, 
.subject.enlarged .subject-time { font-size: 14px; }

/* Stelle sicher, dass der normale Hover-Effekt im vergrösserten Zustand deaktiviert wird */
.subject.enlarged:hover {
  transform: translateX(-50%); /* Entfernt den translateY(-4px) Teil */
  box-shadow: 0 10px 30px rgba(12, 24, 40, 0.4); /* Behält den grösseren Schatten */
}

.subject.enlarged {
  /* Z-Index: Bringt das Element über alle anderen Fächer, damit es sichtbar ist */
  z-index: 100; 
  
  /* HÖHE: Länglicher Zustand (auf 150px erhöht) */
  height: 150px !important; 
  
  /* Reset: Behält die horizontale Zentrierung bei */
  transform: translateX(-50%); 
  
  /* Schatten und Padding */
  box-shadow: 0 10px 30px rgba(12, 24, 40, 0.4);
  padding: 20px 15px; /* Noch mehr Padding für Luft */

  /* ZENTRIERUNG: Text in der länglichen Box zentrieren */
  justify-content: space-around;
}

/* Optional: Inhalt beim Vergrössern deutlich grösser darstellen */
.subject.enlarged .subject-title { 
  font-size: 1.6rem; /* Titel deutlich vergrössern */
  margin-bottom: 10px;
}
.subject.enlarged .subject-time {
  font-size: 1.0rem; /* Uhrzeit */
}
.subject.enlarged .subject-room, 
.subject.enlarged .subject-teacher { 
  font-size: 1.1rem; /* Raum und Lehrer */
}

/* Stelle sicher, dass der Hover-Effekt im vergrösserten Zustand deaktiviert wird */
.subject.enlarged:hover {
  transform: translateX(-50%);
  box-shadow: 0 10px 30px rgba(12, 24, 40, 0.4);
}

/* Mobile behavior */
@media (max-width:900px){
  .day-tabs{ display:flex; }
  .days{ display:none; } /* Desktop-Tage ausblenden auf Mobile */
  .day-column{ display:none; width:100%; max-width:420px; margin:0 auto; }
  .day-column.active{ display:block; }
}

/* kleinere Utility */
@media (min-width:1100px){ :root{ --grid-max:1100px; } }
